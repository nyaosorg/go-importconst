go-importconst
==============

Import constants defined in C-header-files for Go without `cgo`.
It requires `gcc`.

from `const.go` :

```go
package dos

//go:generate go run github.com/zetamatta/go-importconst
//	RESOURCE_CONNECTED
//	RESOURCE_CONTEXT
//	RESOURCE_GLOBALNET
//	RESOURCE_REMEMBERED
//	RESOURCETYPE_ANY
//	RESOURCETYPE_DISK
//	RESOURCETYPE_PRINT
//	RESOURCEDISPLAYTYPE_NETWORK
//	RESOURCEDISPLAYTYPE_SERVER
//	RESOURCEUSAGE_CONNECTABLE
//	RESOURCEUSAGE_CONTAINER
//	RESOURCEUSAGE_ATTACHED
//	RESOURCEUSAGE_ALL
//	ERROR_NO_MORE_ITEMS
//	CONNECT_UPDATE_PROFILE
//	S_OK
```

`go generate` creates the go-source like below

```zconst.go
package dos

// Code generated by importconst_run.go DO NOT EDIT.
const RESOURCE_CONNECTED = 1
const RESOURCE_CONTEXT = 5
const RESOURCE_GLOBALNET = 2
const RESOURCE_REMEMBERED = 3
const RESOURCETYPE_ANY = 0
const RESOURCETYPE_DISK = 1
const RESOURCETYPE_PRINT = 2
const RESOURCEDISPLAYTYPE_NETWORK = 6
const RESOURCEDISPLAYTYPE_SERVER = 2
const RESOURCEUSAGE_CONNECTABLE = 1
const RESOURCEUSAGE_CONTAINER = 2
const RESOURCEUSAGE_ATTACHED = 16
const RESOURCEUSAGE_ALL = 19
const ERROR_NO_MORE_ITEMS = 259
const CONNECT_UPDATE_PROFILE = 1
const S_OK = 0
```

Mechanism
---------

1. Creates the C++ source file like below
2. Compile it with gcc
3. Run the executable and redirect stdout to `zconst.go`


```zconst.cpp
#include <cstdio>
#include <windows.h>

void p(const char *name,const char *s){
	printf("const %s=\"%s\"\n",name,s);
}
void p(const char *name,int n){
	printf("const %s=%d\n",name,n);
}
void p(const char *name,long n){
	printf("const %s=%ld\n",name,n);
}
void p(const char *name,unsigned long n){
	printf("const %s=%ld\n",name,n);
}
void p(const char *name,double n){
	printf("const %s=%lf\n",name,n);
}

int main()
{
    printf("package dos\n\n");
    printf("// Code generated by importconst_run.go DO NOT EDIT.\n");
    p("RESOURCE_CONNECTED",RESOURCE_CONNECTED);
    p("RESOURCE_CONTEXT",RESOURCE_CONTEXT);
    p("RESOURCE_GLOBALNET",RESOURCE_GLOBALNET);
    p("RESOURCE_REMEMBERED",RESOURCE_REMEMBERED);
    p("RESOURCETYPE_ANY",RESOURCETYPE_ANY);
    p("RESOURCETYPE_DISK",RESOURCETYPE_DISK);
    p("RESOURCETYPE_PRINT",RESOURCETYPE_PRINT);
    p("RESOURCEDISPLAYTYPE_NETWORK",RESOURCEDISPLAYTYPE_NETWORK);
    p("RESOURCEDISPLAYTYPE_SERVER",RESOURCEDISPLAYTYPE_SERVER);
    p("RESOURCEUSAGE_CONNECTABLE",RESOURCEUSAGE_CONNECTABLE);
    p("RESOURCEUSAGE_CONTAINER",RESOURCEUSAGE_CONTAINER);
    p("RESOURCEUSAGE_ATTACHED",RESOURCEUSAGE_ATTACHED);
    p("RESOURCEUSAGE_ALL",RESOURCEUSAGE_ALL);
    p("ERROR_NO_MORE_ITEMS",ERROR_NO_MORE_ITEMS);
    p("CONNECT_UPDATE_PROFILE",CONNECT_UPDATE_PROFILE);
    p("S_OK",S_OK);
    return 0;
}
```
